!function(t,e){for(var i in e)t[i]=e[i]}(this,function(i){var n={};function a(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,a),e.l=!0,e.exports}return a.m=i,a.c=n,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(i,n,function(t){return e[t]}.bind(null,n));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/",a(a.s=9)}({6673:function(t,e){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t){return(a="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(t){return i(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":i(t)})(t)}!function(o,t,l){"use strict";var d=60,i="YYYY-MM-DD",n=Backbone.Model.extend({defaults:{endDate:null,startDate:null,calendar:null},clear:function(){this.clearSelectedDate(null)},isValid:function(){return!(!this.has("calendar")||this.get("calendar")<1)&&0<=this.getNights()},clearSelectedDate:function(t){this.set({startDate:null,endDate:null}),this.set("calendar",t),this.trigger("clear_dates")},getNights:function(){return this.has("endDate")&&this.has("startDate")?this.get("endDate").diff(this.get("startDate"),"days"):-1}});window.ScheduleCalendar=Backbone.View.extend({options:{debug:!1,marker:".scheduler__marker",popper:".scheduler__popper > .scheduler__actions",granularity:"nightly"},events:{"click      .scheduler__body .scheduler__date":"setSelectionDate","mouseenter .scheduler__body .scheduler__date":"drawMarkerOnHover"},initialize:function(t){this.isRTL="rtl"===o("html").attr("dir"),this.options=_.defaults(t||{},this.options),this.model=new n;var e=this.$el.find(".scheduler__column").first().outerWidth();d<e&&(d=e),this.$el.find(".scheduler__actions [data-schedule-action]").on("click",this.handleClickAction.bind(this)),this.$marker=this.$el.find(this.options.marker),this.$marker.hide(),this.setupPopper(),this.popper=this.$marker[0]._tippy,window.Waypoint&&this.setupLabelAnimate(),o(document).on("keyup",this.onKeyup.bind(this)),this.listenTo(this.model,"change:startDate change:endDate",this.setMarkerPosition),this.listenTo(this.model,"clear_dates",this.onClearSelectedDates),this.options.debug&&this.listenTo(this.model,"change",this.debug),this.$el.data("scheduler",this)},debug:function(){this.model.has("startDate")&&this.model.has("endDate")?console.log(this.model.get("calendar"),this.model.get("startDate").format(i)+" - "+this.model.get("endDate").format(i)):this.model.has("startDate")?console.log(this.model.get("calendar"),this.model.get("startDate").format(i)+" - null"):this.model.has("endDate")?console.log(this.model.get("calendar"),"null - "+this.model.get("endDate").format(i)):console.log("null - null")},onKeyup:function(t){27===t.keyCode&&this.model.clearSelectedDate()},handleClickAction:function(t){t.preventDefault();var e=o(t.currentTarget);return!!this.model.isValid()&&(!!e.data("scheduleAction")&&void this.trigger("action:"+e.data("scheduleAction"),t,this.model))},onClearSelectedDates:function(){this.popper.hide(),this.$marker.find("span").text(0),this.trigger("clear")},setSelectionDate:function(t){var e=o(t.currentTarget),i=this.getUnitByElement(e),n=l(e.data("date"));if(this.model.has("startDate")&&this.model.has("endDate"))this.model.clearSelectedDate(i);else{if((this.model.has("calendar")&&i!==this.model.get("calendar")||this.model.has("startDate")&&n.isBefore(this.model.get("startDate"),"day"))&&this.model.clearSelectedDate(i),!this.model.has("startDate")&&!this.model.has("endDate"))return this.model.set("calendar",i),this.model.set("startDate",n.clone()),void this.drawMarkerOnHover(t);"nightly"===this.options.granularity&&n.diff(this.model.get("startDate"),"days")<1||(this.popper.show(),this.model.set("endDate",n.clone()),this.trigger("apply",this.model,this))}},setMarkerPosition:function(){var t=this.model.get("endDate"),e=this.model.get("startDate");if(_.isNull(e)&&_.isNull(t))this.$marker.css("width",d).hide();else{var i=this.getElementByDate(this.model.get("calendar"),e);if(_.isNull(t)){var n=this.getCellPossiton(i),a={top:n.top,left:n.left};this.isRTL,this.$marker.show().css(a)}else{var r=this.getElementByDate(this.model.get("calendar"),t);this.$marker.css("width",(r.index()-i.index()+1)*d)}}},drawMarkerOnHover:function(t){var e=o(t.currentTarget),i=this.getUnitByElement(e);if(this.model.has("calendar")&&this.model.get("calendar")===i&&this.model.has("startDate")&&(!this.model.has("startDate")||!this.model.has("endDate"))){var n=l(e.data("date")),a=this.model.get("startDate");if(a.isSameOrBefore(n,"day")){var r=this.getElementByDate(i,a),s=e.index()-r.index()+1;this.$marker.css("width",s*d),this.$marker.find("span").text("daily"===this.options.granularity?s:s-1)}}},getElementByDate:function(t,e){return"object"===a(e)&&(e=e.format(i)),this.$el.find('[data-calendar="'+t+'"]').find('.scheduler__date[data-date="'+e+'"]')},getUnitByElement:function(t){var e=o(t).data("calendar");return void 0===e&&(e=o(t).closest("[data-calendar]").data("calendar")),e=parseInt(e,10),isNaN(e)?0:e},getCellPossiton:function(t){var e=t.offset(),i=this.$el.find(".scheduler__body").offset();return{top:e.top-i.top,left:e.left-i.left}},setupPopper:function(){tippy(this.$marker[0],{html:this.$el.find(this.options.popper)[0],theme:"abrs-tippy",arrow:!0,distance:0,trigger:"manual",placement:"bottom",hideOnClick:"persistent",interactive:!0,performance:!0,animation:"shift-away",duration:[150,150],popperOptions:{modifiers:{hide:{enabled:!1},preventOverflow:{enabled:!1}}}})},setupLabelAnimate:function(){var n=this,t=n.$el.find(".scheduler__main")[0],e=function(t){var e=n.$el.find(".scheduler__aside .scheduler__month-label"),i=o(this.element);"right"===t?(i.attr("data-prev-text",e.text()),e.text(i.text())):(e.text(i.data("prevText")),i.attr("data-prev-text",""))};n.$el.find(".scheduler__month-label").each(function(){new Waypoint({element:this,context:t,offset:-50,horizontal:!0,handler:e})})}})}(jQuery,window.flatpickr,window.moment)},9:function(t,e,i){t.exports=i("6673")}}));